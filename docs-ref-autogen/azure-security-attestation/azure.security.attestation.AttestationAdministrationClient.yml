### YamlMime:PythonClass
uid: azure.security.attestation.AttestationAdministrationClient
name: AttestationAdministrationClient
fullName: azure.security.attestation.AttestationAdministrationClient
module: azure.security.attestation
inheritances:
- builtins.object
summary: "Provides administrative APIs for managing an instance of the Attestation\
  \ Service.\n\nThe <xref:azure.security.attestation.AttestationAdministrationClient>\
  \ object implements the policy\nmanagement and policy certificate management functions.\n\
  \nIf the *signing_key* and *signing_certificate* parameters\nare provided, they\
  \ will be applied to the following APIs:\n\n* <xref:azure.security.attestation.AttestationAdministrationClient.set_policy>\
  \ \n\n* <xref:azure.security.attestation.AttestationAdministrationClient.reset_policy>\
  \ \n\n* <xref:azure.security.attestation.AttestationAdministrationClient.add_policy_management_certificate>\
  \ \n\n* <xref:azure.security.attestation.AttestationAdministrationClient.remove_policy_management_certificate>\
  \ \n\n> [!NOTE]\n> The signing_key and signing_certificate parameters are a pair.\
  \ If one\n>\n> is present, the other must also be provided. In addition, the public\
  \ key\n>\n> in the signing_key and the public key in the signing_certificate must\n\
  >\n> match to ensure that the signing_certificate can be used to validate an\n>\n\
  > object signed by signing_key.\n>\n\n> [!TIP]\n> The validate_token, validation_callback,\
  \ validate_signature,\n>\n> validate_expiration, validate_not_before_time, validate_issuer,\
  \ and\n>\n> issuer keyword arguments are default values applied to each API call\
  \ within\n>\n> the <xref:azure.security.attestation.AttestationAdministrationClient>\
  \ class. These values can be\n>\n> overridden on individual API calls as needed.\n\
  >\n\nFor additional client creation configuration options, please see [Python Request\n\
  Options](https://aka.ms/azsdk/python/options)."
constructor:
  syntax: 'AttestationAdministrationClient(endpoint: str, credential: TokenCredential,
    **kwargs: Any)'
  parameters:
  - name: endpoint
    description: The attestation instance base URI, for example [https://mytenant.attest.azure.net](https://mytenant.attest.azure.net).
    isRequired: true
    types:
    - <xref:str>
  - name: credential
    description: Credentials for the caller used to interact with the service.
    isRequired: true
    types:
    - <xref:azure.core.credentials.TokenCredential>
  - name: signing_key
    description: 'PEM encoded signing key to be used for all

      operations.'
    types:
    - <xref:str>
  - name: signing_certificate
    description: 'PEM encoded X.509 certificate to be used for all

      operations.'
    types:
    - <xref:str>
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
methods:
- uid: azure.security.attestation.AttestationAdministrationClient.add_policy_management_certificate
  name: add_policy_management_certificate
  summary: 'Adds a new policy management certificate to the set of policy management
    certificates for the instance.


    The <xref:azure.security.attestation.AttestationPolicyCertificatesResult> response
    to the

    <xref:azure.security.attestation.AttestationAdministrationClient.add_policy_management_certificate>
    API contains two attributes

    of interest.


    The first is *certificate_resolution*, which indicates

    whether the certificate in question is present in the set of policy

    management certificates after the operation has completed, or if it is

    absent.


    The second is the *thumbprint* of the certificate added. The *thumbprint*

    for the certificate is the SHA1 hash of the DER encoding of the

    certificate.'
  signature: 'add_policy_management_certificate(*args: str, **kwargs: Any) -> Tuple[AttestationPolicyCertificateResult,
    AttestationToken]'
  parameters:
  - name: certificate_to_add
    description: 'Required. PEM encoded X.509 certificate to add to

      the list of attestation policy management certificates.'
    isRequired: true
    types:
    - <xref:str>
  - name: signing_key
    description: 'PEM encoded signing Key representing the key

      associated with one of the *existing* attestation signing certificates.'
    types:
    - <xref:str>
  - name: signing_certificate
    description: 'PEM encoded signing certificate which is one of

      the *existing* attestation signing certificates.'
    types:
    - <xref:str>
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
  return:
    description: 'AttestationPolicyCertificateResult object describing the status

      of the add request and the token sent from the service which

      contained the response.'
    types:
    - <xref:Tuple>[<xref:azure.security.attestation.AttestationPolicyCertificateResult>,
      <xref:azure.security.attestation.AttestationToken>]
- uid: azure.security.attestation.AttestationAdministrationClient.close
  name: close
  signature: close() -> None
- uid: azure.security.attestation.AttestationAdministrationClient.get_policy
  name: get_policy
  summary: 'Retrieves the attestation policy for a specified attestation type.


    > [!NOTE]

    > The Azure Attestation Policy language is defined [here](https://docs.microsoft.com/azure/attestation/author-sign-policy)

    >'
  signature: 'get_policy(attestation_type: str | AttestationType, **kwargs: Any) ->
    Tuple[str, AttestationToken]'
  parameters:
  - name: attestation_type
    description: '<xref:azure.security.attestation.AttestationType> for

      which to retrieve the policy.'
    isRequired: true
    types:
    - <xref:Union>[<xref:str>, <xref:azure.security.attestation.AttestationType>]
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
  return:
    description: 'A tuple containing the attestation policy and the token returned

      by the service..'
    types:
    - <xref:Tuple>[<xref:str>, <xref:azure.security.attestation.AttestationToken>]
  exceptions:
  - type: azure.security.attestation.AttestationTokenValidationException
    description: 'Raised

      when an attestation token is invalid.'
- uid: azure.security.attestation.AttestationAdministrationClient.get_policy_management_certificates
  name: get_policy_management_certificates
  summary: 'Retrieves the set of policy management certificates for the instance.


    The list of policy management certificates will only have values if the

    attestation service instance is in Isolated mode.'
  signature: 'get_policy_management_certificates(**kwargs: Any) -> Tuple[List[List[str]],
    AttestationToken]'
  parameters:
  - name: validate_token
    description: 'If True, validate the token, otherwise

      return the token unvalidated.'
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to

      perform custom validation of the token. If the token is invalid,

      the *validation_callback* function should throw an exception to cause

      the API call to fail.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: 'If True, validate the signature of the

      token being validated.'
    types:
    - <xref:bool>
  - name: validate_expiration
    description: 'If True, validate the expiration time

      of the token being validated.'
    types:
    - <xref:bool>
  - name: validation_slack
    description: 'Slack time for validation - tolerance

      applied to help account for clock drift between the issuer and

      the current machine.'
    types:
    - <xref:float>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validate_issuer
    description: 'If True, validate that the issuer of the

      token matches the expected issuer.'
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: 'If true, validate the

      "Not Before" time in the token.'
    types:
    - <xref:bool>
  return:
    description: A tuple containing the list of PEM encoded X.509 certificate chains
      and an attestation token.
    types:
    - <xref:Tuple>[<xref:List>[<xref:List>[<xref:str>]], <xref:azure.security.attestation.AttestationToken>]
- uid: azure.security.attestation.AttestationAdministrationClient.remove_policy_management_certificate
  name: remove_policy_management_certificate
  summary: 'Removes a policy management certificate from the set of policy management
    certificates for the instance.


    The <xref:azure.security.attestation.AttestationPolicyCertificateResult> response
    to the

    <xref:azure.security.attestation.AttestationAdministrationClient.remove_policy_management_certificate>
    API contains two attributes

    of interest.


    The first is *certificate_resolution*, which indicates

    whether the certificate in question is present in the set of policy

    management certificates after the operation has completed, or if it is

    absent.


    The second is the *thumbprint* of the certificate added. The *thumbprint*

    for the certificate is the SHA1 hash of the DER encoding of the

    certificate.'
  signature: 'remove_policy_management_certificate(*args: str, **kwargs: Any) -> Tuple[AttestationPolicyCertificateResult,
    AttestationToken]'
  parameters:
  - name: certificate_to_remove
    description: 'Required. PEM encoded X.509 certificate to remove from

      the list of attestation policy management certificates.'
    isRequired: true
    types:
    - <xref:str>
  - name: signing_key
    description: 'PEM encoded signing Key representing the key

      associated with one of the *existing* attestation signing certificates.'
    types:
    - <xref:str>
  - name: signing_certificate
    description: 'PEM encoded signing certificate which is one of

      the *existing* attestation signing certificates.'
    types:
    - <xref:str>
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
  return:
    description: Result describing the outcome of the certificate removal.
    types:
    - <xref:Tuple>[<xref:azure.security.attestation.AttestationPolicyCertificateResult>,
      <xref:azure.security.attestation.AttestationToken>]
- uid: azure.security.attestation.AttestationAdministrationClient.reset_policy
  name: reset_policy
  summary: "Resets the attestation policy for the specified attestation type to the\
    \ default value.\n\n> [!NOTE]\n> If the attestation instance is in Isolated mode,\
    \ then the\n>\n> signing_key parameter MUST be a signing key containing one of\
    \ the\n>\n> certificates returned by <xref:azure.security.attestation.AttestationAdministrationClient.get_policy_management_certificates>.\n\
    >\n> \n>\n> If the attestation instance is in AAD mode, then the signing_key\n\
    >\n> parameter does not need to be provided.\n>"
  signature: 'reset_policy(attestation_type: str | AttestationType, **kwargs: Dict[str,
    Any]) -> Tuple[AttestationPolicyResult, AttestationToken]'
  parameters:
  - name: attestation_type
    description: '<xref:azure.security.attestation.AttestationType> for

      which to set the policy.'
    isRequired: true
    types:
    - <xref:Union>[<xref:str>, <xref:azure.security.attestation.AttestationType>]
  - name: signing_key
    description: 'PEM encoded signing key to be used to sign the policy

      before sending it to the service.'
    types:
    - <xref:str>
  - name: signing_certificate
    description: 'PEM encoded X.509 certificate to be sent to the

      service along with the policy.'
    types:
    - <xref:str>
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
  return:
    description: 'A policy set result reflecting the outcome of the policy removal
      and

      the token which contained the result.'
    types:
    - <xref:Tuple>[<xref:azure.security.attestation.AttestationPolicyResult>, <xref:azure.security.attestation.AttestationToken>]
  exceptions:
  - type: azure.security.attestation.AttestationTokenValidationException
    description: 'Raised

      when an attestation token is invalid.'
- uid: azure.security.attestation.AttestationAdministrationClient.set_policy
  name: set_policy
  summary: "Sets the attestation policy for the specified attestation type.\n\n> [!NOTE]\n\
    > If the attestation instance is in Isolated mode, then the\n>\n> signing_key\
    \ parameter MUST be a signing key containing one of the\n>\n> certificates returned\
    \ by <xref:azure.security.attestation.AttestationAdministrationClient.get_policy_management_certificates>.\n\
    >\n> \n>\n> If the attestation instance is in AAD mode, then the signing_key\n\
    >\n> parameter does not need to be provided.\n>"
  signature: 'set_policy(attestation_type: str | AttestationType, attestation_policy:
    str, **kwargs: Any) -> Tuple[AttestationPolicyResult, AttestationToken]'
  parameters:
  - name: attestation_type
    description: '<xref:azure.security.attestation.AttestationType> for

      which to set the policy.'
    isRequired: true
    types:
    - <xref:Union>[<xref:str>, <xref:azure.security.attestation.AttestationType>]
  - name: attestation_policy
    description: Attestation policy to be set.
    isRequired: true
    types:
    - <xref:str>
  - name: signing_key
    description: 'PEM encoded signing key to be used to sign the policy

      before sending it to the service.'
    types:
    - <xref:str>
  - name: signing_certificate
    description: 'PEM encoded X.509 certificate to be sent to the

      service along with the policy.'
    types:
    - <xref:str>
  - name: validate_token
    description: If True, validate the token, otherwise return the token unvalidated.
    types:
    - <xref:bool>
  - name: validation_callback
    description: 'Function callback to allow clients to perform custom validation
      of the token.

      if the token is invalid, the *validation_callback* function should throw

      an exception.'
    types:
    - <xref:typing.Callable>[[<xref:azure.security.attestation.AttestationToken>,
      <xref:azure.security.attestation.AttestationSigner>], <xref:None>]
  - name: validate_signature
    description: If True, validate the signature of the token being validated.
    types:
    - <xref:bool>
  - name: validate_expiration
    description: If True, validate the expiration time of the token being validated.
    types:
    - <xref:bool>
  - name: issuer
    description: Expected issuer, used if *validate_issuer* is true.
    types:
    - <xref:str>
  - name: validation_slack
    description: 'Slack time for validation - tolerance applied

      to help account for clock drift between the issuer and the current machine.'
    types:
    - <xref:float>
  - name: validate_issuer
    description: If True, validate that the issuer of the token matches the expected
      issuer.
    types:
    - <xref:bool>
  - name: validate_not_before_time
    description: If true, validate the "Not Before" time in the token.
    types:
    - <xref:bool>
  return:
    description: Result of set policy operation.
    types:
    - <xref:Tuple>[<xref:azure.security.attestation.AttestationPolicyResult>, <xref:azure.security.attestation.AttestationToken>]
  exceptions:
  - type: azure.security.attestation.AttestationTokenValidationException
    description: 'Raised

      when an attestation token is invalid.'
